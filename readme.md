h1. *Авторизация*

h2. api://registration

Описание: регистрация пользователя
Запрос: {phone, device}
Ответ: 200, {hashDevice, hashPhone} в случае успеха

h2. api://activation/to

Описание: активация пользователя по полученному смс
Запрос: {hashPhone, hashDevice, sms}
Ответ: 200, {token} в случае успеха

h2. api://sms/resending

Описание: повторная отправка смс
Запрос: {hashDevice, hashPhone}
Ответ: 200 в случае успеха

h2. api://enter

Описание: вход для уже активированного пользователя
Запрос: {hashDevice, hashPhone}
Ответ: 200, {token} в случае успеха

h1. *Автомобили*

h2. api://vehicle/add

Описание: добавление номера автомобиля данного пользователя
Запрос: {token, number}
Ответ: 200 в случае успеха

h2. api://vehicle/del

Описание: удаление номера автомобиля данного пользователя
Запрос: {token, number}
Ответ: 200 в случае успеха

h2. api://vehicle/list

Описание: возвращает список автомобильных номеров данного пользователя
Запрос: {token}
Ответ: 200 в случае успеха, [{number}, ...]

h1. *GPS*

h2. api://gps/add

Описание: добавляет координаты пользователя и выставляет флаг, который указывает, можно ли искать данного пользователя по координатам для отправки сообщения
Запрос: {token, gps, used}
Ответ: 200 в случае успеха

h2. api://gps/cleanFlag

Описание: сбрасывает флаг, который указывает, можно ли искать данного пользователя по координатам для отправки сообщения
Запрос: {token}
Ответ: 200 в случае успеха

h1. *Сообщения*

h2. api://msg/send

Описание: отправляет сообщение либо одному пользователю по номеру автомобиля (если код сообщения 1), либо нескольким пользователям по координатам; получателю приходит push-уведомление, содержащее ID сообщения, имя отправителя, его абсолютный рейтинг, код сообщения и номер авто (если есть)
Запрос: {token, msgCode, vehicleNumber}, где msgCode 1-5
Ответ: 200 в случае успеха 

h2. api://msg/subscribe

Описание: подписывается на сообщения от других пользователей
Запрос: {token, msgId}
Ответ: 200 в случае успеха 

h2. api://msg/list

Описание: возвращает список входящих сообщений данного пользователя
Запрос: {token, size}
Ответ: 200, [{messageId, sender, name, rating,  code, vehicle_number, time, flag}, ...] в случае успеха

h2. api://msg/ack

Описание: ответ на сообщение, отправителю сообщения приходит push-уведомление (если код ответа 1), содержащее ID ответившего и ID сообщения, на которое пришел ответ
Запрос: {token, messageId, flag}
Ответ, 200 в случае успеха

h1. *Пользователи*

h2. api://user/list

Описание: список пользователь, отсортированный по рейтингу (абсолютному или текущему)
Запрос: {token, size, ratingType}
Ответ: 200, {id, contextRating, name} в случае успеха

h2. api://user/set

Описание: обновляет информацию о пользователе, обязателен токен и любой из параметров
Запрос: {token, name, birthday, city}
Ответ: 200 в случае успеха